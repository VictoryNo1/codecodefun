## 正则表达式

- 正则表达式介绍
- 特殊字符
- `POSIX`特殊字符

----

### 一、正则表达式介绍

​	***正则表达式***  `(Regular Expression、regex或regexp, 缩写为RE)` 也译为正规表示法、常规表示法，是一种文本文本匹配模式，包括普通字符(例如，a到z之间的字符)和特殊字符(称为"元字符")。它是一种字符串匹配的模式，可以用来检查一个字符串是否含有某种子串、将匹配的子串替换或者从某个字符串中取出某个符合条件的子串。

​	shell的部分表达式支持正则表达式，常见的命令中只有`locate、find、vim、grep、sed、awk`命令支持正则表达式。

### 二、正则表达式特殊字符

定位符使用技巧：同时锚定开头和结尾，做精确匹配；单一锚定开头或结尾或者不锚定的，做模糊匹配。

| 定位符 |                    说明                    |
| :----: | :----------------------------------------: |
|  `^`   |  锚定开头    ^a 以a开头  默认锚定一个字符  |
|  `$`   | 锚定结尾   a$  以a 结尾   默认锚定一个字符 |

测试案例

```
# 精确匹配 匹配以a开头，c结尾的字符串
egrep "^ac$" file
#模糊匹配 匹配以a开头的字符串
egrep "^a" file
```

匹配符：匹配字符串

| 匹配符  |                   说明                    |
| :-----: | :---------------------------------------: |
|   `.`   |  匹配除回车以外的任意 ***一个***  字符。  |
|  `( )`  |               字符串分组。                |
|  `[ ]`  | 定义字符类,匹配括号中的 ***一个*** 字符。 |
| `[ ^ ]` | 表示否定括号中出现字符类中的字符，取反。  |
|   `\`   |                 转义字符                  |
|   `|`   |                    或                     |

测试案例

```
# 匹配以a开头c结尾,中间有任意一个字符的字符串
egrep "^a.c$" file
# 中括号也是匹配一个字符，不过这个字符必须是中括号中存在的
egrep "^a[0-9]c$" file
# 在中括号中加一个^表示，匹配任意一个不是中括号中的字符
egrep "^a[^0-9]c$" file
# 转义字符
egrep "^a\*c$" file
# 以a开头或b开头，以c结尾的字符串
egrep "^(a|b)c$" file
```

限定符

| 限定符  |                           说明                           |
| :-----: | :------------------------------------------------------: |
|   `*`   | 某个字符之后加星号表示该字符可以出现任意次(也可以不出现) |
|   `?`   |                  表示该字符最多出现一次                  |
|   `+`   |               表示其前面的字符出现至少一次               |
| `{n,m}` |   某个字符之后出现，表示该字符最少出现n次，最多出现m次   |
|  `{m}`  |                      正好出现了m次                       |

测试案例

```
# *使用案例
egrep "^ab*c$" file
# ?表示该字符最多出现一次
egrep "^ab?c$" file
# +表示该字符至少出现一次
egrep "^ab+c$" file
# {}用来限定字符出现的次数
egrep "^ab{3}c$" file
egrep "^ab{3,5}c$" file
```

### 三、`POSIX`特殊字符

|   特殊字符   |                说明                |
| :----------: | :--------------------------------: |
| `[:alnum:]`  | `匹配任意字母数字字符0-9 a-z A-Z`  |
| `[:alpha:]`  |    `匹配任意字母,不限定大小写`     |
| `[:digit:]`  |             `数字0-9`              |
| `[:graph:]`  |     `非空字符(非空格控制字符)`     |
| `[:lower:]`  |           `小写字符a-z`            |
| `[:upper:]`  |           `大写字符A-Z`            |
| `[:cntrl:]`  |             `控制字符`             |
| `[:print:]`  |        `非空字符(包括空格)`        |
| `[:punct:]`  |             `标点符号`             |
| `[:blank:]`  |          `空格或TAB字符`           |
| `[:xdigit:]` |            `16进制数字`            |
| `[:space:]`  | `所有空白字符(新行、空格、制表符)` |

测试案例

```
注意 [[]] 双括号的意思是:第一个中括号是匹配符[],匹配中括号中的任意一个字符，第二个中括号是格式，如[:digit:]
# 精确匹配 以a开头c结尾 中间a-zA-Z0-9任意字符,长度为三个字节的字符串
egrep "^a[[:alnum:]]c$"
# 加一个限定符
egrep "^a[[:alnum:]]*c$"
```

