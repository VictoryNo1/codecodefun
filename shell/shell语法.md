### shell 语法

* 如何书写一个shell脚本
* shell脚本运行
* shell中的特殊符号
* 管道
* 重定向
* shell 中的数学运算
* 脚本退出

---

***shell 脚本就是将完成一个任务的所有命令按照执行的先后顺序， 自上而下写入到一个文本文件中，然后给予执行权限***

### 如何书写一个shell脚本

#### shell 脚本的命名

- 名字要有意义，最好不要用 a，b，c，d，1，2，3这种方式命名；
- 虽然linux系统中，文件没有扩展名的概念，依然建议你使用.sh结尾；
- 名字不要太长，最好在30个字节以内解决；

#### 脚本格式

- shell 脚本开头必须指定脚本运行环境，以 **#!** 这个特殊符号组合来组成。如： **#!/bin/bash** 指定该脚本是运行解析由/bin/bash来完成的；
- shell中的注释使用 # 号

```shell
#shell 脚本中，最好加入脚本说明字段
#1) 定义脚本的执行环境
#!/bin/bash

#2) #代表注释 #!是特例
#不知道上面这句怎么写的可以用 which bash 命令查看
#shell 的执行脚本不能有中文

#3)脚本信息
#Author:Liu Yong
#Create Time: 2021/5/28
#Release: 1.0
#Script Description: first shell study script

#4)脚本组成
#解释环境 #!/usr/bin/env bash|python|perl
#注释说明
#执行代码
```



#### 运行shell脚本

- 给予执行权限 
  - chmod 700 文件名
  - ./文件名 
- 解释器直接运行， 不需要权限
  - bash 文件名
  - sh 文件名

#### shell 中的特殊符号

```
~:                       home 目录 # cd ~ 代表进入用户 home 目录
!:                       执行历史命令  !! 表示执行上一条命令
$:                       变量中取内容符
+ - * / %:               对应数学运算 加 减 乘 除 取余数
&:                       后台执行
*:                       星号是shell中的通配符  匹配所有
?:                       问号是shell中的通配符  匹配除回车以外的一个字符
;:                       分号可以在shell中一行执行多条命令，命令之间用分号分割
\:                       转义字符
``:                      反引号 命令中执行命令 echo "today is `date +%F`"
'':                      单引号,脚本中字符串要用单引号引起来，但是不同于双引号的是,单引号不解释变量
"":                      双引号,脚本中出现的字符串可以用双引号引起来  
$?                       返回上一条命令的执行结果
!!                       执行上一条命令
expr 7 + 1 &>/dev/null ; echo $?  判断命令是否执行成功
let sum=1-1; $echo $sum 整数级的运算
bc                      一个计算器 scale=2（小数点支持两位）
```

#### shell 中管道的运用

```
|:管道符在shell中使用是最多的,很多组合命令都需要通过组合命令来完成输出，管道符就是上一个命令的的输出作为下一个命令的输入
例如：cat filename | grep "abc"
echo "当前内存使用率: `echo "scale=2;141*100/7966"|bc`%"
```

#### 重定向

``` 
>       重定向输入,覆盖原数据
>>      重定向追加输入,在原数据的末尾添加。
<       重定向输出, wc -l < /etc/passwd
<<      重定向追加输出,fdisk /dev/sdb <<EOF ...... EOD
```

#### 数学运算

```
双小圆括号运算，在shell中(())也可以用来做数学运算
	expr 只能进行整数运算
	bc 是一个计算器，默认不保留小数位， 可以用命令scale=2来控制保留的小数位
	echo $((100-3))
	echo $((10**3))
```

#### 退出脚本

```
exit NUM 退出脚本，释放系统资源， NUM代表一个整数，代表返回值,范围是（1-255）
```



